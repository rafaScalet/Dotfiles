[tools]
node = '22'
deno = '2'
bun = '1'
pnpm = '10'
yarn = '4'
java = '21'
maven = '3'
gradle = '8'
rust = '1'
dotnet = '8'

[[env]]
_.file = '~/.env'
_.path = '{{ cwd }}/node_modules/.bin'
_.source = '{{ cwd }}/bin/activate'

[[env]]
_.file = '{{ cwd }}/.env'
_.path = '~/.local/share/nvim/mason/bin'
_.source = '{{ cwd }}/.venv/bin/activate'

[tasks.java-execute]
description = 'Run a simple java project'
run = 'java -cp dist {{arg(name="class-name")}}'
usage = 'arg "class-name" default="Main"'
depends = ['java-build']

[tasks.java-build]
description = 'Builds a simple java project'
run = 'javac -d dist $(find src -name "*.java")'

[tasks.jar-build]
run = 'jar cfm "$(basename "$PWD").jar" "$(find -iname manifest.mf)" -C dist .'
description = 'generates a .jar file for a simple java project'

[tasks.jar-execute]
run = 'java -jar "$(basename "$PWD")".jar'
description = 'Execute the jar file generated by build-jar'
depends = ['jar-build']

[tasks.py-venv]
description = 'create a python virtual environment'
run = 'python -m venv {{arg(name="dir-name")}}'
usage = 'arg "dir-name" default=".venv" { choices ".venv" ".env" ".VENV" ".ENV" } '
alias = 'pv'

[settings]
idiomatic_version_file_enable_tools = ["node"]
experimental = true
